(this.webpackJsonplandmark=this.webpackJsonplandmark||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports={commentList:"CommentList_commentList__FsB2h",commentTab:"CommentList_commentTab__AM0o3",commentTab_active:"CommentList_commentTab_active__16i4x",filters:"CommentList_filters__1vHvp"}},,,,function(e,t,n){e.exports={map:"HomePage_map__3IFim",container:"HomePage_container__3zXw_",sideBlock:"HomePage_sideBlock__3kyYE"}},function(e,t,n){e.exports={comment:"Comment_comment__2mct8",name:"Comment_name__3QJe6"}},function(e,t,n){e.exports={filterButton:"FilterCommentsButton_filterButton__2Choa"}},function(e,t,n){e.exports={map:"Map_map__zEKBO",mapContainer:"Map_mapContainer__3cyuI"}},function(e,t,n){e.exports={container:"NewCommentButton_container__2Pk48"}},function(e,t,n){e.exports={form:"NewCommentForm_form__3Ye9V"}},,function(e,t,n){e.exports=n(35)},,,,,function(e,t,n){},function(e,t,n){e.exports={App:"App_App__1JR0v","App-logo":"App_App-logo__1QKMT","App-header":"App_App-header__2CLVe","App-link":"App_App-link__3KAD-",map:"App_map__3vp-6",container:"App_container__2Vu3r",sideBlock:"App_sideBlock__1IGD-","App-logo-spin":"App_App-logo-spin__3ttEy"}},,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=(n(26),n(27),n(6)),s=n.n(i),m=n(8),l=n(2),u=n(3),p=n(5),f=n(4),d=n(38),h=n(39),v=n(14),k=n.n(v),C=n(10),g=n.n(C),_=n(15),y=n.n(_),b=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.comment;return r.a.createElement("div",{className:y.a.comment},r.a.createElement("span",{className:y.a.name},e.name),r.a.createElement("p",null,e.text))}}]),n}(r.a.Component),O=(n(29),function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onSearch,n=e.uid;return r.a.createElement("input",{type:"text",placeholder:"Search",onChange:function(e){return t(e.target.value,n)}})}}]),n}(r.a.Component)),E=n(16),j=n.n(E),A=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={allCommentsDisplayed:!0},e.changeFiltersState=function(){e.setState({allCommentsDisplayed:!e.state.allCommentsDisplayed})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state.allCommentsDisplayed,n=this.props,a=n.filterClickHandler,o=n.inputMask,c=n.myUid;return r.a.createElement("button",{className:j.a.filterButton,onClick:function(){e.changeFiltersState(),a(o,t?c:"")}},t?"My comments":"All comments")}}]),n}(r.a.Component),M=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={commentSelected:""},e.changeSelectedComment=function(t){e.setState({commentSelected:t})},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e){e.activeComment!==this.props.activeComment&&this.changeSelectedComment(this.props.activeComment)}},{key:"render",value:function(){var e=this.props,t=e.commentsList,n=(e.activeComment,e.onCommentClick),a=e.onFiltersChange,o=e.inputMask,c=e.uid,i=e.myUid,s=this.state.commentSelected;return r.a.createElement("div",{className:g.a.commentList},r.a.createElement("div",{className:g.a.filters},r.a.createElement(O,{onSearch:a,uid:c,myUid:i}),r.a.createElement(A,{filterClickHandler:a,inputMask:o,myUid:i})),t.map((function(e){return r.a.createElement("button",{onClick:function(){return n(e)},className:s.id===e.id?"".concat(g.a.commentTab," ").concat(g.a.commentTab_active):"".concat(g.a.commentTab),key:e.id},r.a.createElement(b,{comment:e}))})))}}]),n}(r.a.Component),w=function(){var e=Object(m.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://run.mocky.io/v3/6fd19c31-4349-4853-818f-7f1654561a9d");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=n(11),S=n(17),L=n.n(S),N=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={defaultCenter:{},center:{},zoom:7},e.changeCenter=function(t,n){e.setState({defaultCenter:e.state.defaultCenter,center:{lat:t,lng:n},zoom:5})},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e){e.myPoint!==this.props.myPoint&&this.setState({defaultCenter:{lat:this.props.myPoint.lat,lng:this.props.myPoint.lng},center:{lat:this.props.myPoint.lat,lng:this.props.myPoint.lng},zoom:this.state.zoom}),e.activeMarker!==this.props.activeMarker&&this.changeCenter(this.props.activeMarker.lat,this.props.activeMarker.lng)}},{key:"render",value:function(){var e=this,t=this.state,n=t.defaultCenter,a=t.center,o=t.zoom,c=this.props,i=(c.activeMarker,c.onMarkerClick),s=c.markersList;c.myPoint;return r.a.createElement(x.b,{googleMapsApiKey:"AIzaSyAemEnOiurLbBg2C1a9YraNw95Uay-R6U8"},r.a.createElement(x.a,{zoom:o,defaultCenter:n,center:a,mapContainerClassName:L.a.mapContainer},r.a.createElement(x.c,{onClick:function(){e.changeCenter(n.lat,n.lng)},position:{lat:n.lat,lng:n.lng}}),s.map((function(t){return r.a.createElement(x.c,{key:t.id,id:t.id,position:{lat:t.lat,lng:t.lng},onClick:function(){i(t),e.changeCenter(t.lat,t.lng)}})}))))}}]),n}(r.a.Component),P=n(18),B=n.n(P),F=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.openFormHandler;return r.a.createElement("div",{className:B.a.container},r.a.createElement("button",{onClick:function(){return e()}},"Add new comment"))}}]),n}(r.a.Component),U=n(19),D=n.n(U),I=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.onFormSubmit;return r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(t.target.elements)},className:D.a.form},r.a.createElement("label",null,"Name",r.a.createElement("input",{type:"text"})),r.a.createElement("label",null,"Text",r.a.createElement("input",{type:"text"})),r.a.createElement("button",{type:"submit"},"Add"))}}]),n}(r.a.Component),z=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={activeMarker:"",formIsOpened:!1,commentsList:[],filteredComments:[],inputMask:"",uid:"",myUid:"",myPoint:{}},e.componentDidMount=Object(m.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getComments();case 2:return n=t.sent,t.next=5,e.getCurrentUid();case 5:a=t.sent,navigator.geolocation.getCurrentPosition((function(t){e.setState({commentsList:n,filteredComments:n,myUid:a,myPoint:{lat:t.coords.latitude,lng:t.coords.longitude}})}));case 7:case"end":return t.stop()}}),t)}))),e.getComments=Object(m.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:for(t=e.sent,n=[],a=0;a<Object.keys(t).length;a++)n.push(t[a]);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),e.getCurrentUid=Object(m.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.props.cookies.get("uuid"))||(n=Object(d.a)(),e.props.cookies.set("uuid",n)),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)}))),e.changeActiveMarker=function(t){e.setState({activeMarker:t,formIsOpened:e.state.formIsOpened})},e.openForm=function(){e.setState({activeMarker:e.state.activeMarker,formIsOpened:!0})},e.makeNewComment=function(t){var n={id:e.state.commentsList.length+1,name:t[0].value,text:t[1].value,lat:e.state.myPoint.lat,lng:e.state.myPoint.lng,uid:e.state.myUid};e.state.commentsList.push(n),e.setState({activeMarker:e.state.activeMarker,formIsOpened:!1})},e.changeDisplayedComments=function(t,n){var a=[],r=[],o=new RegExp("".concat(t));if(0!==t.length)for(var c=0;c<e.state.commentsList.length;c++)(o.test(e.state.commentsList[c].name)||o.test(e.state.commentsList[c].text))&&a.push(e.state.commentsList[c]);else a=e.state.commentsList;if(0!==n.length)for(var i=0;i<a.length;i++)n===a[i].uid&&r.push(a[i]);else r=a;e.setState({filteredComments:r,inputMask:t,uid:n})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.activeMarker,n=e.formIsOpened,a=e.myPoint,o=e.inputMask,c=e.commentsList,i=e.filteredComments,s=e.uid,m=e.myUid;this.props.cookies;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:k.a.container},r.a.createElement(N,{onMarkerClick:this.changeActiveMarker,activeMarker:t,markersList:c,myPoint:a}),r.a.createElement("div",{className:k.a.sideBlock},n?"":r.a.createElement(F,{openFormHandler:this.openForm}),n?r.a.createElement(I,{onFormSubmit:this.makeNewComment}):r.a.createElement(M,{activeComment:t,commentsList:c.length===i.length?c:i,onCommentClick:this.changeActiveMarker,onFiltersChange:this.changeDisplayedComments,inputMask:o,uid:s,myUid:m}))))}}]),n}(r.a.Component),T=Object(h.a)(z),H=n(20),J=n.n(H),K=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(J.a,null,r.a.createElement(T,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[21,1,2]]]);
//# sourceMappingURL=main.91ba7cdd.chunk.js.map